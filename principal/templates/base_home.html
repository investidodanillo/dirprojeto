<!DOCTYPE html>
{% load static %} <!-- Carregar arquivos estáticos -->
<html data-lt-installed="true" lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>ERP Cont&aacute;bil - Sistema</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    {% if debug %}
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    {% else %}
    <link rel="stylesheet" href="{% static 'css/main.min.css' %}">
    {% endif %}

</head>

<body>

    <!-- Header A - Navbar Superior -->
    <!-- Header A - Navbar Superior -->
    <header class="headera">
        <div class="logo-container">
            <div class="logo"><a href="{% url 'principal:principal_inicio_index_view' %}"><i
                        class="fa fa-globe fa-2x"></i></a>
            </div>
            <div class="assuntos-menu"><a class="nav-link" href="{% url 'home:home_inicio_View' %}">Home</a></div>



        </div>

        <div class="user-info">

            {% if request.user.is_authenticated %}
            <!-- Link para perfil do usuário -->
            <a href="{% url 'usuarios:controles_usuarios_Update_View' request.user.id %}">
                <i class="fas fa-user"></i>
                {{ request.user.get_full_name|default:request.user.username }}
            </a>

            <!-- Formulário de logout -->
            <form action="{% url 'auth:logout' %}" method="post" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="logout-link" title="Sair"
                    style="background:none;border:none;cursor:pointer;color:inherit;">
                    <span style="margin: 0 6px;">|</span>
                    <i class="fas fa-sign-out-alt"></i> Sair
                </button>
            </form>

            {% else %}
            <!-- Link para login -->
            <a class="logout-link" href="{% url 'auth:login' %}">
                <i class="fas fa-sign-in-alt"></i> Entrar
            </a>
            {% endif %}

        </div>

    </header>

    {% block content %}
    {% endblock %}


    <!-- Footer Fixo -->
    <footer class="footer">
        <div class="footer-left">
            <div class="footer-item">
                <i class="fas fa-shield-alt"></i>
                <span>Sistema Seguro</span>
            </div>
            <div class="footer-divider"></div>
            <div class="footer-item">
                <i class="fas fa-sync-alt"></i>
                <span>&Uacute;ltima atualiza&ccedil;&atilde;o: 05/12/2024</span>
            </div>
            <div class="footer-divider"></div>
            <div class="footer-item">
                <i class="fas fa-circle text-success"></i>
                <span>Online</span>
                <a class="nav-link" href="{% url 'home:home_inicio_View' %}">Principal</a>

            </div>
        </div>
        <div class="footer-right">
            <div class="footer-item">
                <span>v2.1.4</span>
            </div>
            <div class="footer-divider"></div>
            <div class="footer-item">
                <span>2024 ERP Cont&aacute;bil</span>
            </div>
            <div class="footer-divider"></div>
            <div class="footer-item">
                <i class="fas fa-heart"></i>
                <span>Feito com cuidado</span>
            </div>
        </div>
    </footer>

    <script>
        // ========== INICIALIZAÇÃO GERAL ==========
        document.addEventListener('DOMContentLoaded', function () {
            initializeScrollEffects();
            initializeModals();
            initializeAlerts();
        });

        // ========== EFEITOS DE SCROLL ==========
        function initializeScrollEffects() {
            window.addEventListener('scroll', function () {
                const headera = document.querySelector('.headera');
                const headerb = document.querySelector('.headerb');

                if (window.scrollY > 10) {
                    headera?.classList.add('scrolled');
                    headerb?.classList.add('scrolled');
                } else {
                    headera?.classList.remove('scrolled');
                    headerb?.classList.remove('scrolled');
                }
            });
        }

        // ========== MODAIS ==========
        function initializeModals() {
            const modalOverlay = document.getElementById('modalOverlay');
            const openModalBtn = document.getElementById('openModalBtn');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const cancelModalBtn = document.getElementById('cancelModalBtn');

            if (openModalBtn) {
                openModalBtn.addEventListener('click', function () {
                    if (modalOverlay) {
                        modalOverlay.classList.add('active');
                    }
                });
            }

            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', function () {
                    if (modalOverlay) {
                        modalOverlay.classList.remove('active');
                    }
                });
            }

            if (cancelModalBtn) {
                cancelModalBtn.addEventListener('click', function () {
                    if (modalOverlay) {
                        modalOverlay.classList.remove('active');
                    }
                });
            }

            // Fechar modal ao clicar fora
            if (modalOverlay) {
                modalOverlay.addEventListener('click', function (e) {
                    if (e.target === this) {
                        modalOverlay.classList.remove('active');
                    }
                });
            }

            // Fechar modal com ESC
            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape') {
                    if (modalOverlay) {
                        modalOverlay.classList.remove('active');
                    }
                }
            });
        }

        // ========== ALERTAS ==========
        function initializeAlerts() {
            // Fechar alertas dismissible
            document.querySelectorAll('.alert-dismissible .close').forEach(button => {
                button.addEventListener('click', function () {
                    const alert = this.closest('.alert');
                    if (alert) {
                        alert.style.display = 'none';
                    }
                });
            });
        }
    </script>
</body>

</html>